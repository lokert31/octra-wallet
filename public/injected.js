"use strict";(()=>{var c=new Map,i=new Map;function v(){return`${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function t(e,n){return new Promise((s,r)=>{let a=v();c.set(a,{resolve:s,reject:r}),window.postMessage({source:"octra-wallet-page",type:"request",id:a,method:e,params:n},"*"),setTimeout(()=>{c.has(a)&&(c.delete(a),r(new Error("Request timeout")))},6e4)})}window.addEventListener("message",e=>{if(e.source!==window)return;let{source:n,type:s,id:r,success:a,data:u,error:g,eventName:d,eventData:l}=e.data;if(n==="octra-wallet-content"){if(s==="response"&&r){let o=c.get(r);o&&(c.delete(r),a?o.resolve(u):o.reject(new Error(g||"Unknown error")))}if(s==="event"&&d){let o=i.get(d);o&&o.forEach(w=>w(l))}}});var m={isOctraWallet:!0,version:"1.0.0",async connect(){return await t("connect")},async disconnect(){await t("disconnect")},async isConnected(){return await t("isConnected")},async getAddress(){return await t("getAddress")},async getBalance(){return await t("getBalance")},async getNetwork(){return await t("getNetwork")},async sendTransaction(e){return await t("sendTransaction",e)},async sendPrivateTransfer(e){return await t("sendPrivateTransfer",e)},on(e,n){i.has(e)||i.set(e,new Set),i.get(e).add(n)},off(e,n){let s=i.get(e);s&&s.delete(n)}};window.octra=m;window.dispatchEvent(new Event("octra#initialized"));})();
